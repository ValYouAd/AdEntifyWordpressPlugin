{% if model is defined %}
<div class="tag {{ tagShape }} venue-tag-container" style="{{ tag.style }}">
    <div class="tag-place-icon tag-icon"></div>
        <div class="popover">
            <div class="tag-popover-arrow"></div>
            <div class="popover-inner">
                <span class="title">{% if model.link %}<a href="{{ model.link }}" target="_blank">{{ model.title }}</a>{% else %}{{ model.title }}{% endif %}</span>
                {% if model.description is defined and model.description %}
                <p>{{ model.description }}</p>
                {% endif %}
            </div>
            <div id="map-canvas-{{ model.id }}" class="map-canvas"></div>
        <div class="popover-details"></div>
    </div>
</div>
{% if googleMapsAPIKey and model.venue.lat and model.venue.lng %}
    <script type="text/javascript">
        function initialize() {
            var latLng = new google.maps.LatLng({{ model.venue.lat }}, {{ model.venue.lng }});
            var mapOptions = {
                zoom:  14,
                center: latLng,
                scrollwheel: false,
                navigationControl: false,
                mapTypeControl: false,
                scaleControl: false,
                draggable: false,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById('map-canvas-' + {{ model.id }}),
                    mapOptions);
            new google.maps.Marker({
                position: latLng,
                map: map
            });
        }
        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
{% endif %}
{% endif %}